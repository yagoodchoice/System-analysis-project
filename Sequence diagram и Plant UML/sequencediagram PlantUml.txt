@startuml
actor Пользователь
boundary Клиент
control Сервер API
database База данных

autonumber

activate Пользователь
Пользователь -> Клиент: Отправить запрос на витрину
deactivate Пользователь
activate Клиент
Клиент -> Сервер API: GET /api/products
activate Сервер API
Сервер API -> База данных: Запросить данные товаров
activate База данных
База данных --> Сервер API: Вернуть список товаров
deactivate База данных
Сервер API --> Клиент: Список товаров
deactivate Сервер API
deactivate Клиент
activate Пользователь
Пользователь -> Клиент: Выбрать товар
deactivate Пользователь
activate Клиент
Клиент -> Сервер API: GET /api/products/{id}
activate Сервер API
Сервер API -> База данных: Запросить данные о товаре
activate База данных
База данных --> Сервер API: Вернуть детали товара
deactivate База данных
Сервер API --> Клиент: Детали товара
deactivate Сервер API
deactivate Клиент
activate Пользователь
Пользователь -> Клиент: Добавить товар в корзину
activate Клиент
Клиент -> Сервер API: POST /api/cart
activate Сервер API
Сервер API -> База данных: Проверить наличие товара
alt Товар закончился
База данных --> Сервер API: Товар закончился
Сервер API --> Клиент: Товар закончился
Клиент --> Пользователь: Уведомление, что товар закончился
else Товар имеется в наличии
База данных --> Сервер API: Товар в наличии
Сервер API -> База данных: Обновить корзину
activate База данных
База данных --> Сервер API: Подтверждение обновления
deactivate База данных
Сервер API --> Клиент: Товар добавлен в корзину
deactivate Сервер API
Клиент --> Пользователь: Отображение корзины
deactivate Клиент
deactivate Пользователь
end alt
@enduml
